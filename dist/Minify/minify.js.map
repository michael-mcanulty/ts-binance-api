{"version":3,"file":"minify.js","sourceRoot":"","sources":["../../src/Minify/minify.ts"],"names":[],"mappings":";;AAAA,6BAA6B;AAC7B,yBAAyB;AACzB,iCAA4B;AAG5B,MAAa,MAAM;IAMX,YAAY;QAClB,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;IACzB,CAAC;IAEM,eAAe,CAAC,KAAe;QACrC,IAAI,GAAG,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC,QAAQ,CAAC;QAC5C,KAAK,CAAC,OAAO,CAAC,CAAC,CAAA,EAAE;YAChB,IAAI,MAAM,GAAa,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACpC,IAAI,GAAG,GAAW,OAAO,MAAM,CAAC,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC;YACxD,IAAI,GAAG,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,EAAC;gBAC9B,IAAG;oBACF,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;iBAClB;gBAAA,OAAM,GAAG,EAAC;oBACV,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;iBACjB;aACD;YACD,IAAG,GAAG,EAAC;gBACN,IAAI,MAAM,GAAW,eAAe,CAAC,qEAAqE,CAAC,EAAE,CAAC;gBAC9G,GAAG,CAAC,MAAM,CAAC,CAAC;aACZ;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;IAED;QACC,IAAI,IAAI,GAAuB,EAAE,CAAC;QAClC,IAAI,IAAI,GAAW,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACtC,IAAI,CAAC,OAAO,GAAG,GAAG,IAAI,OAAO,CAAC;QAC9B,IAAI,SAAS,GAAW,GAAG,IAAI,CAAC,OAAO,SAAS,CAAC;QACjD,IAAI,CAAC,MAAM,GAAG,CAAC,SAAS,CAAC,CAAC;QAC1B,IAAI,CAAC,KAAK,GAAG,CAAC,WAAW,CAAC,CAAC;QAC3B,IAAI,CAAC,IAAI,GAAG,IAAI,WAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QACzC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACjC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;IACjC,CAAC;CACD;AAxCD,wBAwCC;AAED,MAAM,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC","sourcesContent":["import * as path from 'path';\r\nimport * as fs from 'fs';\r\nimport {Walk} from \"./Walk\";\r\nimport {IOptions} from \"./Interfaces/IOptions\";\r\n\r\nexport class Minify{\r\n\tpublic baseDir: string;\r\n\tpublic walk: Walk;\r\n\tpublic paths: string[];\r\n\tpublic scriptStr: string;\r\n\r\n\tpublic getFilePaths(): string[]{\r\n\t\treturn this.walk.sync();\r\n\t}\r\n\r\n\tpublic getMinifyScript(files: string[]): void{\r\n\t\tlet cmd = require('child_process').execSync;\r\n\t\tfiles.forEach(t=>{\r\n\t\t\tlet dirArr: string[] = t.split('/');\r\n\t\t\tlet dir: string = `min/${dirArr.slice(0,-1).join('/')}`;\r\n\t\t\tif (dir && !fs.existsSync(dir)){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tfs.mkdirSync(dir);\r\n\t\t\t\t}catch(err){\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(dir){\r\n\t\t\t\tlet tmpRes: string = `terser dist/${t} --compress --mangle --keep-classnames --keep-fnames --output min/${t}`;\r\n\t\t\t\tcmd(tmpRes);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tconstructor(){\r\n\t\tlet opts: IOptions = <IOptions>{};\r\n\t\tlet base: string = path.resolve('./');\r\n\t\tthis.baseDir = `${base}/dist`;\r\n\t\tlet minifyDir: string = `${this.baseDir}/Minify`;\r\n\t\topts.ignore = [minifyDir];\r\n\t\topts.globs = [`*/**/*.js`];\r\n\t\tthis.walk = new Walk(this.baseDir, opts);\r\n\t\tthis.paths = this.getFilePaths();\r\n\t\tthis.getMinifyScript(this.paths)\r\n\t}\r\n}\r\n\r\nconst minify = new Minify();"]}