{"version":3,"file":"minify.js","sourceRoot":"","sources":["../../src/Minify/minify.ts"],"names":[],"mappings":";;AAAA,6BAA6B;AAC7B,yBAAyB;AACzB,iCAA4B;AAG5B;IAMQ,YAAY;QAClB,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;IACzB,CAAC;IAEM,eAAe,CAAC,KAAe;QACrC,IAAI,GAAG,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC,QAAQ,CAAC;QAC5C,KAAK,CAAC,OAAO,CAAC,CAAC,CAAA,EAAE;YAChB,IAAI,IAAI,GAAa,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAClC,IAAI,GAAG,GAAW,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAC3D,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAA,CAAC;gBACxB,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YACnB,CAAC;YACD,IAAI,MAAM,GAAW,eAAe,CAAC,qEAAqE,CAAC,EAAE,CAAC;YAC9G,GAAG,CAAC,MAAM,CAAC,CAAC;QACb,CAAC,CAAC,CAAC;IACJ,CAAC;IAED;QACC,IAAI,IAAI,GAAuB,EAAE,CAAC;QAClC,IAAI,IAAI,GAAW,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACtC,IAAI,CAAC,OAAO,GAAG,GAAG,IAAI,OAAO,CAAC;QAC9B,IAAI,SAAS,GAAW,GAAG,IAAI,CAAC,OAAO,SAAS,CAAC;QACjD,IAAI,CAAC,MAAM,GAAG,CAAC,SAAS,CAAC,CAAC;QAC1B,IAAI,CAAC,KAAK,GAAG,CAAC,WAAW,CAAC,CAAC;QAC3B,IAAI,CAAC,IAAI,GAAG,IAAI,WAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QACzC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACjC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;IACjC,CAAC;CACD;AAlCD,wBAkCC;AAED,MAAM,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC","sourcesContent":["import * as path from 'path';\nimport * as fs from 'fs';\nimport {Walk} from \"./Walk\";\nimport {IOptions} from \"./Interfaces/IOptions\";\n\nexport class Minify{\n\tpublic baseDir: string;\n\tpublic walk: Walk;\n\tpublic paths: string[];\n\tpublic scriptStr: string;\n\n\tpublic getFilePaths(): string[]{\n\t\treturn this.walk.sync();\n\t}\n\n\tpublic getMinifyScript(files: string[]): void{\n\t\tlet cmd = require('child_process').execSync;\n\t\tfiles.forEach(t=>{\n\t\t\tlet dirs: string[] = t.split('/');\n\t\t\tlet dir: string = \"min\" + \"/\" + dirs.slice(0,-1).join(\"/\");\n\t\t\tif (!fs.existsSync(dir)){\n\t\t\t\tfs.mkdirSync(dir);\n\t\t\t}\n\t\t\tlet tmpRes: string = `terser dist/${t} --compress --mangle --keep-classnames --keep-fnames --output min/${t}`;\n\t\t\tcmd(tmpRes);\n\t\t});\n\t}\n\n\tconstructor(){\n\t\tlet opts: IOptions = <IOptions>{};\n\t\tlet base: string = path.resolve('./');\n\t\tthis.baseDir = `${base}/dist`;\n\t\tlet minifyDir: string = `${this.baseDir}/Minify`;\n\t\topts.ignore = [minifyDir];\n\t\topts.globs = [`*/**/*.js`];\n\t\tthis.walk = new Walk(this.baseDir, opts);\n\t\tthis.paths = this.getFilePaths();\n\t\tthis.getMinifyScript(this.paths)\n\t}\n}\n\nconst minify = new Minify();"]}