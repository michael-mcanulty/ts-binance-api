{"version":3,"file":"BBLogger.js","sourceRoot":"","sources":["../../src/Logger/BBLogger.ts"],"names":[],"mappings":"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","sourcesContent":["import * as fs from \"fs\";\r\nimport {WriteStream} from \"fs\";\r\nimport * as path from \"path\";\r\n\r\nexport class BBLogger {\r\n\tprivate static _INSTANCE: BBLogger;\r\n\tprivate static _base: string = path.dirname(process.cwd());\r\n\tprivate static _dirBase: string = `${BBLogger._base}/${BBLogger._getAppName()}/logs/`;\r\n\tprivate static _errorStreamPath: string = `${BBLogger._dirBase}/error.txt`;\r\n\tprivate static _infoStreamPath: string = `${BBLogger._dirBase}/info.txt`;\r\n\tprivate static _warningStreamPath: string = `${BBLogger._dirBase}/warning.txt`;\r\n\r\n\tpublic static get Instance() {\r\n\t\treturn this._INSTANCE || (this._INSTANCE = new this());\r\n\t}\r\n\r\n\tprivate static _getAppName(): string {\r\n\t\tlet appName: string = \"\";\r\n\t\tlet pathArr: string[] = process.cwd().split(path.sep);\r\n\t\tlet idxContains: number = BBLogger.indexContains(pathArr, \"bb-\");\r\n\t\tif (idxContains >= 0) {\r\n\t\t\tappName = pathArr[idxContains];\r\n\t\t}\r\n\t\treturn appName;\r\n\t}\r\n\r\n\tprivate static _getMsg(msg: string): string {\r\n\t\treturn `${BBLogger.utcToPST(new Date()).toISOString()} at ${BBLogger._getAppName()} \\n ${msg} \\r\\n`;\r\n\t}\r\n\r\n\tpublic static error(msg: string) {\r\n\t\tlet logStream: WriteStream = fs.createWriteStream(BBLogger._errorStreamPath, {flags: 'a'});\r\n\t\tlogStream.write(BBLogger._getMsg(msg), () => {\r\n\t\t\tlogStream.close();\r\n\t\t});\r\n\t}\r\n\r\n\tpublic static indexContains(arr: string[], strContains: string): number {\r\n\t\tlet idx: number = -1;\r\n\t\tlet hasSome: boolean = arr.some((item: string, index: number) => {\r\n\t\t\tidx = index;\r\n\t\t\treturn (item.indexOf(strContains) >= 0);\r\n\t\t});\r\n\t\treturn idx;\r\n\t}\r\n\r\n\tpublic static info(msg: string) {\r\n\t\tlet logStream: WriteStream = fs.createWriteStream(BBLogger._infoStreamPath, {flags: 'a'});\r\n\t\tlogStream.write(BBLogger._getMsg(msg), () => {\r\n\t\t\tlogStream.close();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate static utcToPST(date?: Date) {\r\n\t\tlet _date: Date = (date) ? date : new Date();\r\n\t\treturn new Date(_date.getTime() - new Date().getTimezoneOffset() * 60000);\r\n\t}\r\n\r\n\tpublic static warning(msg: string) {\r\n\t\tlet logStream: WriteStream = fs.createWriteStream(BBLogger._warningStreamPath, {flags: 'a'});\r\n\t\tlogStream.write(BBLogger._getMsg(msg), () => {\r\n\t\t\tlogStream.close();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate constructor() {\r\n\t}\r\n}"]}