{"version":3,"file":"ErrorTextMessage.js","sourceRoot":"","sources":["../../src/Error/ErrorTextMessage.ts"],"names":[],"mappings":";;AAAA,4DAAuD;AAIvD,mDAA8C;AAE9C,MAAa,gBAAiB,SAAQ,yBAAW;IAMzC,KAAK,CAAC,SAAS,CAAC,KAAsB,EAAE,MAAe;QAC7D,IAAI,OAAe,CAAC;QACpB,IAAI,MAAc,CAAC;QAEnB,IAAG,CAAC,KAAK,EAAC;YACT,OAAO;SACP;QACD,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,KAAK,CAAC,OAAO,CAAC;QACrC,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,uBAAU,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,iBAAiB,CAAC;QACvJ,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAEnB,IAAI,OAAO,KAAK,CAAC,SAAS,CAAC,KAAK,SAAS,IAAI,CAAC,OAAO,KAAK,CAAC,SAAS,CAAC,KAAK,UAAU,CAAC,EAAE;YACtF,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC;YACjC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC;SAC7C;QACD,IAAG,MAAM,EAAC;YACT,MAAM,GAAG,aAAa,MAAM,EAAE,CAAC;YAC/B,IAAI,CAAC,UAAU,CAAC,IAAI,IAAI,MAAM,CAAC;SAC/B;QACD,MAAM,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IACrF,CAAC;IAED,YAAY,WAAqB,EAAE,cAAsB,EAAE,QAAsB;QAChF,KAAK,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;QAC7B,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;IACtC,CAAC;CACD;AAhCD,4CAgCC","sourcesContent":["import {TextMessage} from \"../TextMessage/TextMessage\";\r\nimport {HttpError} from \"./HttpError\";\r\nimport {ECarrier} from \"../TextMessage/ECarrier\";\r\nimport {ISmtpOptions} from \"./Interfaces/ISmtpOptions\";\r\nimport {EErrorType} from \"./Enums/EErrorType\";\r\n\r\nexport class ErrorTextMessage extends TextMessage{\r\n\tpublic error: HttpError|Error;\r\n\tpublic recipientPhone: number;\r\n\tprivate _hasHandler: boolean;\r\n\tprivate _isFatal: boolean;\r\n\r\n\tpublic async sendError(error: HttpError|Error, source?: string){\r\n\t\tlet subject: string;\r\n\t\tlet srcMsg: string;\r\n\r\n\t\tif(!error){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.msgOptions.text = error.message;\r\n\t\tthis.msgOptions.subject = `${(this._isFatal) ? \"Fatal\" : \"\"}${(this._hasHandler) ? EErrorType[this.error['handler'].type] : \"Unknown\"} Error Received`;\r\n\t\tthis.error = error;\r\n\r\n\t\tif (typeof error['isFatal'] === \"boolean\" || (typeof error['handler'] === \"function\")) {\r\n\t\t\tthis._isFatal = error['isFatal'];\r\n\t\t\tthis._hasHandler = !!(error['handler'].type);\r\n\t\t}\r\n\t\tif(source){\r\n\t\t\tsrcMsg = `\\nSource: ${source}`;\r\n\t\t\tthis.msgOptions.text += srcMsg;\r\n\t\t}\r\n\t\tawait this.send(this.msgOptions.subject, this.msgOptions.text, this.recipientPhone);\r\n\t}\r\n\r\n\tconstructor(carrierName: ECarrier, recipientPhone: number, smtpOpts: ISmtpOptions){\r\n\t\tsuper(carrierName, smtpOpts);\r\n\t\tthis.recipientPhone = recipientPhone;\r\n\t}\r\n}"]}