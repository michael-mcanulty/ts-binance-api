{"version":3,"file":"ErrorTextMessage.js","sourceRoot":"","sources":["../../src/Error/ErrorTextMessage.ts"],"names":[],"mappings":";;AAAA,4DAAuD;AAIvD,mDAA8C;AAE9C,sBAA8B,SAAQ,yBAAW;IAMzC,KAAK,CAAC,SAAS,CAAC,KAAsB,EAAE,MAAe;QAC7D,IAAI,OAAe,CAAC;QACpB,IAAI,MAAc,CAAC;QAEnB,EAAE,CAAA,CAAC,CAAC,KAAK,CAAC,CAAA,CAAC;YACV,MAAM,CAAC;QACR,CAAC;QAED,IAAI,CAAC,UAAU,CAAC,IAAI,GAAG,KAAK,CAAC,OAAO,CAAC;QACrC,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,uBAAU,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,iBAAiB,CAAC;QACvJ,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAEnB,EAAE,CAAC,CAAC,OAAO,KAAK,CAAC,SAAS,CAAC,KAAK,SAAS,IAAI,CAAC,OAAO,KAAK,CAAC,SAAS,CAAC,KAAK,UAAU,CAAC,CAAC,CAAC,CAAC;YACvF,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC;YACjC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC;QAC9C,CAAC;QACD,EAAE,CAAA,CAAC,MAAM,CAAC,CAAA,CAAC;YACV,MAAM,GAAG,aAAa,MAAM,EAAE,CAAC;YAC/B,IAAI,CAAC,UAAU,CAAC,IAAI,IAAI,MAAM,CAAC;QAChC,CAAC;QACD,MAAM,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IACrF,CAAC;IAED,YAAY,WAAqB,EAAE,cAAsB,EAAE,QAAsB;QAChF,KAAK,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;QAC7B,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;IACtC,CAAC;CACD;AAjCD,4CAiCC","sourcesContent":["import {TextMessage} from \"../TextMessage/TextMessage\";\nimport {HttpError} from \"./HttpError\";\nimport {ECarrier} from \"../TextMessage/ECarrier\";\nimport {ISmtpOptions} from \"./Interfaces/ISmtpOptions\";\nimport {EErrorType} from \"./Enums/EErrorType\";\n\nexport class ErrorTextMessage extends TextMessage{\n\tpublic error: HttpError|Error;\n\tpublic recipientPhone: number;\n\tprivate _hasHandler: boolean;\n\tprivate _isFatal: boolean;\n\n\tpublic async sendError(error: HttpError|Error, source?: string){\n\t\tlet subject: string;\n\t\tlet srcMsg: string;\n\n\t\tif(!error){\n\t\t\treturn;\n\t\t}\n\n\t\tthis.msgOptions.text = error.message;\n\t\tthis.msgOptions.subject = `${(this._isFatal) ? \"Fatal\" : \"\"}${(this._hasHandler) ? EErrorType[this.error['handler'].type] : \"Unknown\"} Error Received`;\n\t\tthis.error = error;\n\n\t\tif (typeof error['isFatal'] === \"boolean\" || (typeof error['handler'] === \"function\")) {\n\t\t\tthis._isFatal = error['isFatal'];\n\t\t\tthis._hasHandler = !!(error['handler'].type);\n\t\t}\n\t\tif(source){\n\t\t\tsrcMsg = `\\nSource: ${source}`;\n\t\t\tthis.msgOptions.text += srcMsg;\n\t\t}\n\t\tawait this.send(this.msgOptions.subject, this.msgOptions.text, this.recipientPhone);\n\t}\n\n\tconstructor(carrierName: ECarrier, recipientPhone: number, smtpOpts: ISmtpOptions){\n\t\tsuper(carrierName, smtpOpts);\n\t\tthis.recipientPhone = recipientPhone;\n\t}\n}"]}